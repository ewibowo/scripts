#!/usr/local/bin/expect -f
#
# This Expect script was generated by autoexpect on Thu Mar  3 20:07:41 2016
# Expect and autoexpect were both written by Don Libes, NIST.
#
# Note that autoexpect does not guarantee a working script.  It
# necessarily has to guess about certain things.  Two reasons a script
# might fail are:
#
# 1) timing - A surprising number of programs (rn, ksh, zsh, telnet,
# etc.) and devices discard or ignore keystrokes that arrive "too
# quickly" after prompts.  If you find your new script hanging up at
# one spot, try adding a short sleep just before the previous send.
# Setting "force_conservative" to 1 (see below) makes Expect do this
# automatically - pausing briefly before sending each character.  This
# pacifies every program I know of.  The -c flag makes the script do
# this in the first place.  The -C flag allows you to define a
# character to toggle this mode off and on.

set force_conservative 0  ;# set to 1 to force conservative mode even if
			  ;# script wasn't run conservatively originally
if {$force_conservative} {
	set send_slow {1 .1}
	proc send {ignore arg} {
		sleep .1
		exp_send -s -- $arg
	}
}

#
# 2) differing output - Some programs produce different output each time
# they run.  The "date" command is an obvious example.  Another is
# ftp, if it produces throughput statistics at the end of a file
# transfer.  If this causes a problem, delete these patterns or replace
# them with wildcards.  An alternative is to use the -p flag (for
# "prompt") which makes Expect only look for the last line of output
# (i.e., the prompt).  The -P flag allows you to define a character to
# toggle this mode off and on.
#
# Read the man page for more info.
#
# -Don


set timeout -1
spawn $env(SHELL)
match_max 100000
expect -exact "Static loading...\r
\[1m\[7m%\[27m\[1m\[0m                                                                                                                                                                                 \r \r\]2;rlaney@flypro: ~/scripts/autoexpect\]1;..ts/autoexpect\]2;rlaney@flypro: ~/scripts/autoexpect\]1;..ts/autoexpect\r\[0m\[27m\[24m\[J\[39m\[0m\[49m\[40m \[38;5;46mâœ“\[39m \[40m\[93mî‚± \[93mrlaney@flypro \[44m\[30mî‚° \[30m~/scripts/autoexpect \[42m\[34mî‚° \[30m\[30m\[30mî‚  master\[39m \[30m?\[39m\[39m \[49m\[32mî‚°\[39m \[K\[98C\[39m\[0m\[49m\[37mî‚²\[39m\[47m\[30m 20:07:44 03/03/2016 \[39m\[00m\[49m\[120D\[?1h=\r\r\[0m\[27m\[24m\[J\[39m\[0m\[49m\[40m \[38;5;46mâœ“\[39m \[40m\[93mî‚± \[93mrlaney@flypro \[44m\[30mî‚° \[30m~/scripts/autoexpect \[42m\[34mî‚° \[30m\[30m\[30mî‚  master\[39m \[30m?\[39m\[39m \[49m\[32mî‚°\[39m \[K\[98C\[39m\[0m\[49m\[37mî‚²\[39m\[47m\[30m 20:07:44 03/03/2016 \[39m\[00m\[49m\[120D"
send -- "OA"
expect -exact "\[32mautoexpect\[39m"
send -- "OA"
expect -exact "\[10D\[32ml\[39m\[39m \[39m \[39m \[39m \[39m \[39m \[39m \[39m \[39m \[9D"
send -- "OA"
expect -exact "\[32mc\[32md\[39m \[4mautoexpect\[24m"
send -- "OA"
expect -exact "\[13D\[32ml\[39m\[39m  \[24m \[24m \[24m \[24m \[24m \[24m \[24m \[24m \[24m \[24m \[12D"
send -- "OA"
expect -exact "\[32mc\[32md\[39m scripts"
send -- "OA"
expect -exact "\[10D\[32mk\[32me\[32my\[32mc\[32mh\[32ma\[32mi\[32mn\[39m -l"
send -- "OA"
expect -exact "-confhost --inherit any \[4m~/.ssh/cloud_id\[24m"
send -- ""
expect -exact "\[4m/\[24m\[24m "
send -- "*"
expect -exact "\[24m\[34m~\[24m\[34m/\[24m\[34m.\[24m\[34ms\[24m\[34ms\[24m\[34mh\[24m\[34m/\[34m*\[39m"
send -- "\r"
expect "\[?1l>\r\r\[0m\[27m\[24m\[J\[39m\[0m\[49m\[40m \[38;5;46mâœ“\[39m \[40m\[93mî‚± \[93mrlaney@flypro \[44m\[30mî‚° \[30m~/scripts/autoexpect \[42m\[34mî‚° \[30m\[30m\[30mî‚  master\[39m \[30m?\[39m\[39m \[49m\[32mî‚°\[39m \[32mkeychain\[39m --confhost --inherit any \[34m~/.ssh/*\[39m\[K\[56C\[39m\[0m\[49m\[37mî‚²\[39m\[47m\[30m 20:08:07 03/03/2016 \[39m\[00m\[49m\[78D\r\r
\]2;keychain --confhost --inherit any ~/.ssh/*\]1;keychain\]2;keychain --confhost --inherit any ~/.ssh/*\]1;keychain\r
 \[32;01m*\[0m \[35;01mkeychain \[0m\[36m2.8.2\[0m ~ \[32;01mhttp://www.funtoo.org\[0m\r
 \[32;01m*\[0m Starting ssh-agent...\r
 \[Adding ssh key(s): /Users/rlaney/.ssh/cloud_id /Users/rlaney/.ssh/ssh_rsa\r
Enter passphrase for /Users/rlaney/.ssh/cloud_id: "
send -- "LetMeIn22\r"
expect "Enter passphrase for /Users/rlaney/.ssh/cloud_id.pub: "
send -- "LetMeIn22\r"
expect "Enter passphrase for /Users/rlaney/.ssh/ssh_rsa: "
send -- "atdSw6t!D\$h2L9De\r"
send -- "\r"
expect eof

 keychain --confhost --inherit any ~/.ssh/*

 * keychain 2.8.2 ~ http://www.funtoo.org
 * Starting ssh-agent...
 * Adding  8 ssh key(s): /Users/rlaney/.ssh/cloud_id /Users/rlaney/.ssh/cloud_id.pub /Users/rlaney/.ssh/id_rsa /Users/rlaney/.ssh/id_rsa.pub /Users/rlaney/.ssh/id_rsa_git /Users/rlaney/.ssh/id_rsa_git.pub /Users/rlaney/.ssh/ssh_rsa /Users/rlaney/.ssh/ssh_rsa.pub
Enter passphrase for /Users/rlaney/.ssh/cloud_id:
Enter passphrase for /Users/rlaney/.ssh/ssh_rsa:

 keychain --confhost --inherit any ~/.ssh/cloud_id

 * keychain 2.8.2 ~ http://www.funtoo.org
 * Starting ssh-agent...
 * Adding  1 ssh key(s): /Users/rlaney/.ssh/cloud_id
Enter passphrase for /Users/rlaney/.ssh/cloud_id:
 * ssh-add: Identities added: /Users/rlaney/.ssh/cloud_id

 keychain --confhost --inherit any ~/.ssh/ssh_rsa

 * keychain 2.8.2 ~ http://www.funtoo.org
 * Starting ssh-agent...
 * Adding  1 ssh key(s): /Users/rlaney/.ssh/ssh_rsa
Enter passphrase for /Users/rlaney/.ssh/ssh_rsa:
 * ssh-add: Identities added: /Users/rlaney/.ssh/ssh_rsa

