#!/usr/local/bin/expect -f
#
# This Expect script was generated by autoexpect on Thu Feb  4 11:55:17 2016
# Expect and autoexpect were both written by Don Libes, NIST.
#
# Note that autoexpect does not guarantee a working script.  It
# necessarily has to guess about certain things.  Two reasons a script
# might fail are:
#
# 1) timing - A surprising number of programs (rn, ksh, zsh, telnet,
# etc.) and devices discard or ignore keystrokes that arrive "too
# quickly" after prompts.  If you find your new script hanging up at
# one spot, try adding a short sleep just before the previous send.
# Setting "force_conservative" to 1 (see below) makes Expect do this
# automatically - pausing briefly before sending each character.  This
# pacifies every program I know of.  The -c flag makes the script do
# this in the first place.  The -C flag allows you to define a
# character to toggle this mode off and on.

set force_conservative 0  ;# set to 1 to force conservative mode even if
			  ;# script wasn't run conservatively originally
if {$force_conservative} {
	set send_slow {1 .1}
	proc send {ignore arg} {
		sleep .1
		exp_send -s -- $arg
	}
}

#
# 2) differing output - Some programs produce different output each time
# they run.  The "date" command is an obvious example.  Another is
# ftp, if it produces throughput statistics at the end of a file
# transfer.  If this causes a problem, delete these patterns or replace
# them with wildcards.  An alternative is to use the -p flag (for
# "prompt") which makes Expect only look for the last line of output
# (i.e., the prompt).  The -P flag allows you to define a character to
# toggle this mode off and on.
#
# Read the man page for more info.
#
# -Don


set timeout -1
spawn $env(SHELL)
match_max 100000
expect -exact "Static loading...\r
\[1m\[7m%\[27m\[1m\[0m                                                                                                                                                                                                                                             \r \r\]2;rlaney@flypro: ~/scripts/autoexpect\]1;..ts/autoexpect\]2;rlaney@flypro: ~/scripts/autoexpect\]1;..ts/autoexpect\r\[0m\[27m\[24m\[J\[39m\[0m\[49m\[40m \[38;5;46m‚úì\[39m \[40m\[93mÓÇ± \[93mrlaney@flypro \[44m\[30mÓÇ∞ \[30m~/scripts/autoexpect \[43m\[34mÓÇ∞ \[30m\[30m\[30mÓÇ† master\[39m \[30m‚óè\[39m \[30m?\[39m\[39m \[49m\[33mÓÇ∞\[39m \[K\[156C\[39m\[0m\[49m\[37mÓÇ≤\[39m\[47m\[30m 11:55:21 02/04/2016 \[39m\[00m\[49m\[178D\[?1h=\r\r\[0m\[27m\[24m\[J\[39m\[0m\[49m\[40m \[38;5;46m‚úì\[39m \[40m\[93mÓÇ± \[93mrlaney@flypro \[44m\[30mÓÇ∞ \[30m~/scripts/autoexpect \[43m\[34mÓÇ∞ \[30m\[30m\[30mÓÇ† master\[39m \[30m‚óè\[39m \[30m?\[39m\[39m \[49m\[33mÓÇ∞\[39m \[K\[156C\[39m\[0m\[49m\[37mÓÇ≤\[39m\[47m\[30m 11:55:21 02/04/2016 \[39m\[00m\[49m\[178D"
send -- "s"
expect -exact "\[32ms\[39m"
send -- "s"
expect -exact "\[1m\[31ms\[1m\[31ms\[0m\[39m"
send -- "h"
expect -exact "\[0m\[32ms\[0m\[32ms\[32mh\[39m"
send -- " 172.19.39.36\r"
expect -exact "\[?1l>\r\r\[0m\[27m\[24m\[J\[39m\[0m\[49m\[40m \[38;5;46m‚úì\[39m \[40m\[93mÓÇ± \[93mrlaney@flypro \[44m\[30mÓÇ∞ \[30m~/scripts/autoexpect \[43m\[34mÓÇ∞ \[30m\[30m\[30mÓÇ† master\[39m \[30m‚óè\[39m \[30m?\[39m\[39m \[49m\[33mÓÇ∞\[39m \[32mssh\[39m 172.19.39.36\[K\[140C\[39m\[0m\[49m\[37mÓÇ≤\[39m\[47m\[30m 11:56:15 02/04/2016 \[39m\[00m\[49m\[162D\r\r
\]2;ssh 172.19.39.36\]1;172.19.39.36\]2;ssh 172.19.39.36\]1;172.19.39.36The authenticity of host '172.19.39.36 (172.19.39.36)' can't be established.\r
RSA key fingerprint is SHA256:wD92vxToSCJw5WPwQm79U8bFkMhu108h1Ujp9oT3xJo.\r
Are you sure you want to continue connecting (yes/no)? "
send -- "yes\r"
expect -exact "yes\r
Warning: Permanently added '172.19.39.36' (RSA) to the list of known hosts.\r\r
\r\r
\r\r
     ******************************************************************\r\r
     *                                                                *\r\r
     *                     AUTHORIZED ACCESS ONLY                     *\r\r
     *                                                                *\r\r
     *    This system and all of its components are restricted to     *\r\r
     *   authorized users for legitimate business purposes and are    *\r\r
     *   subject to audit. Persons who violate this policy will be    *\r\r
     *  subject to the disciplinary process. The actual or attempted  *\r\r
     *  unauthorized access, use modification or copying of computer  *\r\r
     *       systems is a violation of Federal and State laws.        *\r\r
     *                                                                *\r\r
     ******************************************************************\r\r
\r\r
password: "
send -- "22RalRox\$\r"
expect -exact "\r
\r
hsc-htv-vz-gw1 line 706 \r
\r
hsc-htv-vz-gw1#"
send -- "sh run int "
expect -exact " "
send -- ""
expect -exact " "
send -- ""
expect -exact " "
send -- ""
expect -exact " "
send -- "| i snmp"
expect -exact " "
send -- ""
expect -exact " "
send -- ""
expect -exact " "
send -- ""
expect -exact " "
send -- "flow\r"
expect -exact "flow\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 --More-- "
send -- " "
expect -exact "         ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
 ip flow ingress\r
 ip flow egress\r
ip flow-cache timeout active 1\r
ip flow-export source Port-channel1.926\r
ip flow-export version 9\r
ip flow-export destination 172.19.12.110 2055\r
ip flow-export destination 172.19.12.32 2055\r
ip flow-top-talkers\r
hsc-htv-vz-gw1#"
send -- "\[A"
expect -exact "sh run | i flow"
send -- "-export\r"
expect -exact "-export\r
ip flow-export source Port-channel1.926\r
ip flow-export version 9\r
ip flow-export destination 172.19.12.110 2055\r
ip flow-export destination 172.19.12.32 2055\r
hsc-htv-vz-gw1#"
send -- "conf t\r"
expect -exact "conf t\r
Enter configuration commands, one per line.  End with CNTL/Z.\r
hsc-htv-vz-gw1(config)#"
send -- "no ip flow "
expect -exact " "
send -- "-exp	"
expect -exact "\r
hsc-htv-vz-gw1(config)#no ip flow-export "
send -- "desti	"
expect -exact "\r
hsc-htv-vz-gw1(config)#no ip flow-export destination "
send -- "172.19.12.110 2055\r"
expect -exact "172.19.12.110 2055\r
hsc-htv-vz-gw1(config)#"
send -- "ip flow-exp	"
expect -exact "\r
hsc-htv-vz-gw1(config)#ip flow-export "
send -- "destination 10.0."
expect -exact " "
send -- ""
expect -exact " "
send -- "72.0.96 2055\r"
expect -exact "72.0.96 2055\r
hsc-htv-vz-gw1(config)#"
send -- "end\r"
expect -exact "end\r
hsc-htv-vz-gw1#"
send -- "sh ip flow e	"
expect -exact "\r
hsc-htv-vz-gw1#sh ip flow export "
send -- "?"
expect -exact "\r
  sctp      Display SCTP export statistics\r
  template  Display export template statistics\r
  verbose   Display verbose export statistics\r
  |         Output modifiers\r
  <cr>\r
\r
hsc-htv-vz-gw1#sh ip flow export "
send -- "verbose\r"
expect -exact "verbose\r
Flow export v9 is enabled for main cache\r
  Export source and destination details : \r
  VRF ID : Default\r
    Source(1)       172.19.39.36 (Port-channel1.926)\r
    Source(2)       172.19.39.36 (Port-channel1.926)\r
    Destination(1)  172.19.12.32 (2055) \r
    Destination(2)  10.72.0.96 (2055) \r
  Version 9 flow records\r
  1312985164 flows exported in 1130319939 udp datagrams\r
  259 flows failed due to lack of export packet\r
  0 export packets were sent up to process level\r
  112 export packets were dropped due to no fib\r
  686 export packets were dropped due to adjacency issues\r
  0 export packets were dropped due to fragmentation failures\r
  0 export packets were dropped due to encapsulation fixup failures\r
hsc-htv-vz-gw1#"
send -- "\[A"
expect -exact "sh ip flow export verbose"
send -- "\r"
expect -exact "\r
Flow export v9 is enabled for main cache\r
  Export source and destination details : \r
  VRF ID : Default\r
    Source(1)       172.19.39.36 (Port-channel1.926)\r
    Source(2)       172.19.39.36 (Port-channel1.926)\r
    Destination(1)  172.19.12.32 (2055) \r
    Destination(2)  10.72.0.96 (2055) \r
  Version 9 flow records\r
  1313011280 flows exported in 1130320843 udp datagrams\r
  259 flows failed due to lack of export packet\r
  0 export packets were sent up to process level\r
  112 export packets were dropped due to no fib\r
  686 export packets were dropped due to adjacency issues\r
  0 export packets were dropped due to fragmentation failures\r
  0 export packets were dropped due to encapsulation fixup failures\r
hsc-htv-vz-gw1#"
send -- "\[A"
expect -exact "sh ip flow export verbose"
send -- "\r"
expect -exact "\r
Flow export v9 is enabled for main cache\r
  Export source and destination details : \r
  VRF ID : Default\r
    Source(1)       172.19.39.36 (Port-channel1.926)\r
    Source(2)       172.19.39.36 (Port-channel1.926)\r
    Destination(1)  172.19.12.32 (2055) \r
    Destination(2)  10.72.0.96 (2055) \r
  Version 9 flow records\r
  1313042663 flows exported in 1130321929 udp datagrams\r
  259 flows failed due to lack of export packet\r
  0 export packets were sent up to process level\r
  112 export packets were dropped due to no fib\r
  686 export packets were dropped due to adjacency issues\r
  0 export packets were dropped due to fragmentation failures\r
  0 export packets were dropped due to encapsulation fixup failures\r
hsc-htv-vz-gw1#"
send -- "\[A"
expect -exact "sh ip flow export verbose"
send -- "\r"
expect -exact "\r
Flow export v9 is enabled for main cache\r
  Export source and destination details : \r
  VRF ID : Default\r
    Source(1)       172.19.39.36 (Port-channel1.926)\r
    Source(2)       172.19.39.36 (Port-channel1.926)\r
    Destination(1)  172.19.12.32 (2055) \r
    Destination(2)  10.72.0.96 (2055) \r
  Version 9 flow records\r
  1313068723 flows exported in 1130322831 udp datagrams\r
  259 flows failed due to lack of export packet\r
  0 export packets were sent up to process level\r
  112 export packets were dropped due to no fib\r
  686 export packets were dropped due to adjacency issues\r
  0 export packets were dropped due to fragmentation failures\r
  0 export packets were dropped due to encapsulation fixup failures\r
hsc-htv-vz-gw1#"
send -- "\[A"
expect -exact "sh ip flow export verbose"
send -- "\r"
expect -exact "\r
Flow export v9 is enabled for main cache\r
  Export source and destination details : \r
  VRF ID : Default\r
    Source(1)       172.19.39.36 (Port-channel1.926)\r
    Source(2)       172.19.39.36 (Port-channel1.926)\r
    Destination(1)  172.19.12.32 (2055) \r
    Destination(2)  10.72.0.96 (2055) \r
  Version 9 flow records\r
  1313094753 flows exported in 1130323731 udp datagrams\r
  259 flows failed due to lack of export packet\r
  0 export packets were sent up to process level\r
  112 export packets were dropped due to no fib\r
  686 export packets were dropped due to adjacency issues\r
  0 export packets were dropped due to fragmentation failures\r
  0 export packets were dropped due to encapsulation fixup failures\r
hsc-htv-vz-gw1#"
send -- "\[A"
expect -exact "sh ip flow export verbose"
send -- "\r"
expect -exact "\r
Flow export v9 is enabled for main cache\r
  Export source and destination details : \r
  VRF ID : Default\r
    Source(1)       172.19.39.36 (Port-channel1.926)\r
    Source(2)       172.19.39.36 (Port-channel1.926)\r
    Destination(1)  172.19.12.32 (2055) \r
    Destination(2)  10.72.0.96 (2055) \r
  Version 9 flow records\r
  1313143014 flows exported in 1130325401 udp datagrams\r
  259 flows failed due to lack of export packet\r
  0 export packets were sent up to process level\r
  112 export packets were dropped due to no fib\r
  686 export packets were dropped due to adjacency issues\r
  0 export packets were dropped due to fragmentation failures\r
  0 export packets were dropped due to encapsulation fixup failures\r
hsc-htv-vz-gw1#"
send -- "wr mem\r"
expect -exact "wr mem\r
Building configuration...\r
\r
\[OK\]\r
hsc-htv-vz-gw1#"
send -- "exit\r"
expect -exact "exit\r
Connection to 172.19.39.36 closed.\r\r
\[1m\[7m%\[27m\[1m\[0m                                                                                                                                                                                                                                             \r \r\]2;rlaney@flypro: ~/scripts/autoexpect\]1;..ts/autoexpect\]2;rlaney@flypro: ~/scripts/autoexpect\]1;..ts/autoexpect\r\[0m\[27m\[24m\[J\[39m\[0m\[49m\[40m \[38;5;46m‚úì\[39m \[40m\[93mÓÇ± \[93mrlaney@flypro \[44m\[30mÓÇ∞ \[30m~/scripts/autoexpect \[43m\[34mÓÇ∞ \[30m\[30m\[30mÓÇ† master\[39m \[30m‚óè\[39m \[30m?\[39m\[39m \[49m\[33mÓÇ∞\[39m \[K\[156C\[39m\[0m\[49m\[37mÓÇ≤\[39m\[47m\[30m 11:58:59 02/04/2016 \[39m\[00m\[49m\[178D\[?1h=\r\r\[0m\[27m\[24m\[J\[39m\[0m\[49m\[40m \[38;5;46m‚úì\[39m \[40m\[93mÓÇ± \[93mrlaney@flypro \[44m\[30mÓÇ∞ \[30m~/scripts/autoexpect \[43m\[34mÓÇ∞ \[30m\[30m\[30mÓÇ† master\[39m \[30m‚óè\[39m \[30m?\[39m\[39m \[49m\[33mÓÇ∞\[39m \[K\[156C\[39m\[0m\[49m\[37mÓÇ≤\[39m\[47m\[30m 11:58:59 02/04/2016 \[39m\[00m\[49m\[178D"
send -- ""
expect -exact "\r\r
\[1m\[7m%\[27m\[1m\[0m                                                                                                                                                                                                                                             \r \r\]2;rlaney@flypro: ~/scripts/autoexpect\]1;..ts/autoexpect\]2;rlaney@flypro: ~/scripts/autoexpect\]1;..ts/autoexpect\r\[0m\[27m\[24m\[J\[39m\[0m\[49m\[41m \[38;5;226m‚Üµ\[39m \[38;5;226m1 \[40m\[31mÓÇ∞ \[93mrlaney@flypro \[44m\[30mÓÇ∞ \[30m~/scripts/autoexpect \[43m\[34mÓÇ∞ \[30m\[30m\[30mÓÇ† master\[39m \[30m‚óè\[39m \[30m?\[39m\[39m \[49m\[33mÓÇ∞\[39m \[K\[154C\[39m\[0m\[49m\[37mÓÇ≤\[39m\[47m\[30m 11:59:05 02/04/2016 \[39m\[00m\[49m\[176D\[?1h=\r\r\[0m\[27m\[24m\[J\[39m\[0m\[49m\[41m \[38;5;226m‚Üµ\[39m \[38;5;226m1 \[40m\[31mÓÇ∞ \[93mrlaney@flypro \[44m\[30mÓÇ∞ \[30m~/scripts/autoexpect \[43m\[34mÓÇ∞ \[30m\[30m\[30mÓÇ† master\[39m \[30m‚óè\[39m \[30m?\[39m\[39m \[49m\[33mÓÇ∞\[39m \[K\[154C\[39m\[0m\[49m\[37mÓÇ≤\[39m\[47m\[30m 11:59:05 02/04/2016 \[39m\[00m\[49m\[176D"
send -- "q"
expect -exact "\[1m\[31mq\[0m\[39m"
send -- "u"
expect -exact "\[1m\[31mq\[1m\[31mu\[0m\[39m"
send -- "i"
expect -exact "\[1m\[31mq\[1m\[31mu\[1m\[31mi\[0m\[39m"
send -- "t"
expect -exact "\[1m\[31mi\[1m\[31mt\[0m\[39m"
send -- "\r"
expect -exact "\[?1l>\r\r\[0m\[27m\[24m\[J\[39m\[0m\[49m\[41m \[38;5;226m‚Üµ\[39m \[38;5;226m1 \[40m\[31mÓÇ∞ \[93mrlaney@flypro \[44m\[30mÓÇ∞ \[30m~/scripts/autoexpect \[43m\[34mÓÇ∞ \[30m\[30m\[30mÓÇ† master\[39m \[30m‚óè\[39m \[30m?\[39m\[39m \[49m\[33mÓÇ∞\[39m \[1m\[31mquit\[0m\[39m\[K\[150C\[39m\[0m\[49m\[37mÓÇ≤\[39m\[47m\[30m 11:59:10 02/04/2016 \[39m\[00m\[49m\[172D\r\r
\]2;quit\]1;quit\]2;quit\]1;quitzsh: command not found: quit\r
\[1m\[7m%\[27m\[1m\[0m                                                                                                                                                                                                                                             \r \r\]2;rlaney@flypro: ~/scripts/autoexpect\]1;..ts/autoexpect\]2;rlaney@flypro: ~/scripts/autoexpect\]1;..ts/autoexpect\r\[0m\[27m\[24m\[J\[39m\[0m\[49m\[41m \[38;5;226m‚Üµ\[39m \[38;5;226m127 \[40m\[31mÓÇ∞ \[93mrlaney@flypro \[44m\[30mÓÇ∞ \[30m~/scripts/autoexpect \[43m\[34mÓÇ∞ \[30m\[30m\[30mÓÇ† master\[39m \[30m‚óè\[39m \[30m?\[39m\[39m \[49m\[33mÓÇ∞\[39m \[K\[152C\[39m\[0m\[49m\[37mÓÇ≤\[39m\[47m\[30m 11:59:10 02/04/2016 \[39m\[00m\[49m\[174D\[?1h=\r\r\[0m\[27m\[24m\[J\[39m\[0m\[49m\[41m \[38;5;226m‚Üµ\[39m \[38;5;226m127 \[40m\[31mÓÇ∞ \[93mrlaney@flypro \[44m\[30mÓÇ∞ \[30m~/scripts/autoexpect \[43m\[34mÓÇ∞ \[30m\[30m\[30mÓÇ† master\[39m \[30m‚óè\[39m \[30m?\[39m\[39m \[49m\[33mÓÇ∞\[39m \[K\[152C\[39m\[0m\[49m\[37mÓÇ≤\[39m\[47m\[30m 11:59:10 02/04/2016 \[39m\[00m\[49m\[174D"
send -- "e"
expect -exact "\[32me\[39m"
send -- "x"
expect -exact "\[32me\[32mx\[39m"
send -- "i"
expect -exact "\[1m\[31me\[1m\[31mx\[1m\[31mi\[0m\[39m"
send -- "t"
expect -exact "\[0m\[32me\[0m\[32mx\[0m\[32mi\[32mt\[39m"
send -- "\r"
expect eof
